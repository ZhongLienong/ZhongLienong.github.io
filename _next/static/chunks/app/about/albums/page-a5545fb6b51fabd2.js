(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{8196:(e,t,i)=>{Promise.resolve().then(i.bind(i,9239))},9239:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var r=i(5155),o=i(2115);let s=(0,o.memo)(function(e){let{albums:t,onFilterChange:i}=e,[s,l]=(0,o.useState)([]),[n,a]=(0,o.useState)(null),{allTags:d,tagCategories:p}=(0,o.useMemo)(()=>{let e=t.flatMap(e=>e.tags.map(e=>["Live","Studio"].includes(e)?{name:e,type:"type"}:e.endsWith("s")&&5===e.length&&!isNaN(Number(e.slice(0,4)))?{name:e,type:"decade"}:{name:e,type:"artist"})),i={Artist:[...new Set(e.filter(e=>"artist"===e.type).map(e=>e.name))].sort((e,t)=>e.localeCompare(t)),Decade:[...new Set(e.filter(e=>"decade"===e.type).map(e=>e.name))].sort((e,t)=>e.localeCompare(t)),Type:[...new Set(e.filter(e=>"type"===e.type).map(e=>e.name))]};return{allTags:e,tagCategories:i}},[t]),c=(0,o.useCallback)((e,t)=>{if(!d.find(t=>t.name===e))return;let r=[...s];r=r.filter(e=>{let i=d.find(t=>t.name===e);return(null==i?void 0:i.type)!==t}),s.includes(e)||(r=[...r,e]),l(r),i(r),a(null)},[d,s,i]),u=(0,o.useCallback)(e=>{a(n===e?null:e)},[n]);return(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"20px",padding:"15px",backgroundColor:"#222",borderRadius:"8px"},children:Object.entries(p).map(e=>{let[t,i]=e;return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsxs)("button",{onClick:()=>u(t),style:{backgroundColor:"#333",color:"white",border:"none",padding:"8px 16px",borderRadius:"20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[t,(0,r.jsx)("span",{style:{fontSize:"12px"},children:"▼"})]}),n===t&&(0,r.jsx)("div",{style:{position:"absolute",top:"100%",left:"0",backgroundColor:"#333",borderRadius:"8px",padding:"8px",zIndex:"100",minWidth:"150px",maxHeight:"300px",overflowY:"auto",overflowX:"hidden",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",scrollbarWidth:"thin",scrollbarColor:"#6a4a8c #333"},children:i.map(e=>(0,r.jsx)("div",{onClick:()=>{var t;let i=(null==(t=d.find(t=>t.name===e))?void 0:t.type)||"artist";c(e,i)},style:{padding:"6px 12px",borderRadius:"4px",cursor:"pointer",backgroundColor:s.includes(e)?"#6a4a8c":"transparent",color:"white",margin:"2px 0"},children:e},e))})]},t)})})});function l(e){let{spotifyId:t}=e,[i,s]=(0,o.useState)(!1),[l,n]=(0,o.useState)(!1),[a,d]=(0,o.useState)(!1),[p,c]=(0,o.useState)(!1),u=(0,o.useRef)(null),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!u.current)return;let e=new IntersectionObserver(t=>{t[0].isIntersecting&&(s(!0),e.disconnect())},{threshold:.1});return e.observe(u.current),()=>{e.disconnect()}},[]),(0,o.useEffect)(()=>(!i||l||a||(m.current=setTimeout(()=>{c(!0)},1e4)),()=>{m.current&&clearTimeout(m.current)}),[i,l,a]),(0,r.jsx)("div",{ref:u,style:{height:l?"auto":"352px"},children:!i||a||p?(0,r.jsx)("div",{style:{height:"352px",backgroundColor:"#282828",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#aaa",fontSize:"14px",padding:"20px"},children:a||p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{style:{marginBottom:"15px"},children:p?"Request timed out.":"Failed to load Spotify player."}),(0,r.jsx)("button",{onClick:()=>{d(!1),c(!1),s(!1),setTimeout(()=>s(!0),100)},style:{backgroundColor:"#6a4a8c",color:"white",border:"none",padding:"8px 16px",borderRadius:"20px",cursor:"pointer",fontSize:"14px"},children:"Retry"})]}):"Spotify player loading..."}):(0,r.jsx)("iframe",{src:"https://open.spotify.com/embed/album/".concat(t,"?utm_source=generator"),width:"100%",height:"352",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",onLoad:()=>{n(!0),m.current&&clearTimeout(m.current)},onError:()=>{d(!0),m.current&&clearTimeout(m.current)},style:{opacity:+!!l,transition:"opacity 0.3s"}})})}let n=(0,o.memo)(function(e){let{album:t}=e,[i,s]=(0,o.useState)(!1);return(0,r.jsxs)("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"15px",color:"white"},children:[(0,r.jsxs)("h3",{style:{marginBottom:"15px",position:"relative",display:"inline-block",cursor:t.comment?"help":"default"},onMouseEnter:()=>t.comment&&s(!0),onMouseLeave:()=>t.comment&&s(!1),children:[t.title,t.comment&&(0,r.jsx)("span",{style:{visibility:i?"visible":"hidden",opacity:+!!i,width:"200px",backgroundColor:"#333",color:"#fff",textAlign:"center",borderRadius:"6px",padding:"8px",position:"absolute",zIndex:1e3,left:"50%",top:"100%",marginTop:"5px",transform:"translateX(-50%)",transition:"opacity 0.3s ease",fontStyle:"normal",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.comment})]}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"15px"},children:t.tags.map(e=>(0,r.jsx)("span",{style:{backgroundColor:"#6a4a8c",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:e},e))}),(0,r.jsx)(l,{spotifyId:t.spotifyId})]})}),a=JSON.parse('[{"id":"1","title":"Pulse","tags":["Pink Floyd","1990s","Live"],"spotifyId":"7iLuEbxvxepyHp4yfVfiut"},{"id":"2","title":"The Dark Side of The Moon","tags":["Pink Floyd","1970s","Studio"],"comment":"MY ALL TIME FAV","spotifyId":"4LH4d3cOWNNsVw41Gqt2kv"},{"id":"3","title":"Alchemy: Dire Straits Live","tags":["Dire Straits","1980s","Live"],"spotifyId":"7JLiApdEm6DhYEdK3cop0v"},{"id":"4","title":"How the West Was Won","tags":["Led Zeppelin","1970s","Live"],"spotifyId":"3otvl9PN3kOgk5uwAh1CBL"},{"id":"5","title":"The Definitive 24 Nights","tags":["Eric Clapton","1990s","Live"],"spotifyId":"7uLDovmFB97bee1kDTtCNl"},{"id":"6","title":"Syracuse Live 1985","tags":["Prince","1980s","Live"],"spotifyId":"4Y8oukfqpJupRcCsHucO7J"},{"id":"7","title":"Wildflowers","tags":["Tom Petty","1990s","Studio"],"spotifyId":"3ZGUBwDiY5HPOcWv4SBPQg"},{"id":"8","title":"Meddle","tags":["Pink Floyd","1970s","Studio"],"spotifyId":"468ZwCchVtzEbt9BHmXopb"},{"id":"9","title":"Live at the Fillmore","tags":["Tom Petty and the Heartbreakers","1990s","Live"],"spotifyId":"1XtnMkxeV9wdELLvBZxktL"},{"id":"10","title":"Ok Computer","tags":["Radiohead","1990s","Studio"],"spotifyId":"6dVIqQ8qmQ5GBnJ9shOYGE"},{"id":"11","title":"Live Aid","tags":["Various Artists","1980s","Live"],"comment":"Where is Led Zeppelin?","spotifyId":"0kenHkk55M5xQXbEqlFoOT"},{"id":"12","title":"教育","tags":["東京事変","2000s","Studio"],"spotifyId":"0WhNxc2V5kYKaPevYHVT5v"},{"id":"13","title":"Atom Heart Mother","tags":["Pink Floyd","1970s","Studio"],"spotifyId":"2cUpAOlQjV5uSjkWj5bEQY"},{"id":"14","title":"Wish You Were Here","tags":["Pink Floyd","1970s","Studio"],"spotifyId":"0bCAjiUamIFqKJsekOYuRw"},{"id":"15","title":"Animals","tags":["Pink Floyd","1970s","Studio"],"spotifyId":"3b4E89rxzZQ9zkhgKpj8N4"},{"id":"16","title":"Knebworth 1996","tags":["Oasis","1990s","Live"],"spotifyId":"5TC9oSol9ZQwXQk8XcsD7i"},{"id":"17","title":"In The Court Of The Crimson King","tags":["King Crimson","1960s","Studio"],"spotifyId":"75ol9OP8bJaRqzGimpFHDm"}]');function d(){let[e,t]=(0,o.useState)([]),[i,l]=(0,o.useState)([]),[d,p]=(0,o.useState)(!0),[c,u]=(0,o.useState)(null),[m,x]=(0,o.useState)({start:0,end:8}),h=(0,o.useRef)(null),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{l(a),p(!1)},[]);let f=(0,o.useMemo)(()=>0===e.length?i:i.filter(t=>e.every(e=>t.tags.includes(e))),[i,e]),y=(0,o.useMemo)(()=>e.length>0&&f.length>8,[f.length,e.length]),b=(0,o.useCallback)(()=>{h.current&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{let{scrollTop:e,clientHeight:t}=h.current,i=Math.ceil(t/450),r=Math.floor(e/450);x({start:Math.max(0,r-2),end:Math.min(f.length,r+i+2)})},50))},[f.length]);return(0,o.useEffect)(()=>{let e=h.current;return e&&(e.addEventListener("scroll",b),b()),()=>{e&&e.removeEventListener("scroll",b),g.current&&clearTimeout(g.current)}},[b]),(0,o.useEffect)(()=>{b()},[e,b]),(0,r.jsxs)("div",{className:"section",children:[(0,r.jsx)("h2",{className:"bg-purple",children:"Now this is a CD wall"}),(0,r.jsxs)("div",{style:{padding:"20px"},children:[d?(0,r.jsx)("div",{children:"Loading albums..."}):c?(0,r.jsx)("div",{style:{color:"red"},children:c}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{albums:i,onFilterChange:t}),0===f.length&&(0,r.jsx)("div",{style:{marginTop:"20px",color:"#ccc"},children:"No albums match the selected filters"})]}),(0,r.jsx)("div",{ref:h,style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",marginTop:"20px",maxHeight:0===e.length?"none":"1100px",overflowY:"auto",overflowX:"hidden",paddingRight:"16px",scrollbarWidth:"thin",scrollbarColor:"#6a4a8c #222",minHeight:0===e.length?"auto":"500px"},children:y?f.slice(m.start,m.end).map(e=>(0,r.jsx)(n,{album:e},e.id)):f.map(e=>(0,r.jsx)(n,{album:e},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(8196)),_N_E=e.O()}]);